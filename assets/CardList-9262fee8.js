import{_ as h,r as S,o as e,c as a,w as r,v as _,d as m,e as R,t as g,a as C,s as f,F as u,b as y}from"./index-2e0221dd.js";const k={props:{id:{type:Number},title:{type:String},image:{type:String,default:"/assets/playlist.svg"},isSongCard:{type:Boolean,default:!1},detailRoute:{type:String},canBeRemove:{type:Boolean}}},v={class:"card__bloc"},B={key:0,class:"material-symbols-outlined card__playlist-rm"},I={key:1,class:"material-symbols-outlined card__playlist-add"},L=["src"],x={key:1,class:"material-symbols-outlined card__icon"},b={class:"card__title"};function N(d,i,t,n,s,o){const c=S("RouterLink");return e(),a("div",v,[t.canBeRemove?r((e(),a("i",B,"delete",512)),[[_,t.isSongCard]]):r((e(),a("span",I,"playlist_add",512)),[[_,t.isSongCard]]),m(c,{to:`${t.detailRoute}/${t.id}`,"data-id":t.id,"data-title":t.title,"data-image":t.image,class:"card"},{default:R(()=>[t.image.includes("/")?r((e(),a("img",{key:0,src:t.image,alt:"card image",class:"card__image"},null,8,L)),[[_,t.image!=""]]):(e(),a("span",x,g(t.image),1)),C("h1",b,g(t.title),1)]),_:1},8,["to","data-id","data-title","data-image"])])}const w=h(k,[["render",N]]),F={props:{cards:{type:Array},title:{type:String},isSongList:{type:Boolean,default:!1},name:{type:String},detailRoute:{type:String}},data(){return{store:f}},computed:{canRemovingCard(){return this.$route.name==="playlist details"}},methods:{cardClickHandler(d){const i=d.target.closest(".card__bloc");if(!i)return;const t=i.querySelector(".card"),n=this.cards.find(s=>s.id===parseInt(t.dataset.id));this.store.clickedSong=`${this.store.playlistIRI}/${n.id}`,d.target.classList.contains("card__playlist-add")?this.store.showForm():d.target.classList.contains("card__playlist-rm")&&this.removeSongFromPlaylist(n)},removeSongFromPlaylist(d){const i=this.store.list.playlist.items.findIndex(s=>s.id===parseInt(this.$route.params.id));let t=this.store.list.playlist.items[i];const n=t.songs.findIndex(s=>s.id===d.id);t.songs.splice(n,1),this.store.list.playlist.items[i]=t,this.store.patchPlaylist({...t,songs:t.songs.map(s=>`${this.store.playlistIRI}/${s.id}`)}),this.$emit("reload")}},components:{Card:w}},p={class:"card__list__container"},P={class:"card__list__title"},H=["data-listName"],D={class:"card__list__item"},V=["data-listName"],q={class:"card__list__item"};function A(d,i,t,n,s,o){const c=S("Card");return e(),a("article",p,[C("h3",P,g(t.title),1),t.isSongList?(e(),a("ul",{key:0,onClick:i[0]||(i[0]=(...l)=>o.cardClickHandler&&o.cardClickHandler(...l)),class:"card__list","data-listName":t.name},[(e(!0),a(u,null,y(t.cards,l=>(e(),a("li",D,[m(c,{detailRoute:t.detailRoute,isSongCard:t.isSongList,canBeRemove:o.canRemovingCard,id:l.id,title:l.title,image:l.image},null,8,["detailRoute","isSongCard","canBeRemove","id","title","image"])]))),256))],8,H)):(e(),a("ul",{key:1,class:"card__list","data-listName":t.name},[(e(!0),a(u,null,y(t.cards,l=>(e(),a("li",q,[m(c,{detailRoute:t.detailRoute,isSongCard:t.isSongList,canBeRemove:o.canRemovingCard,id:l.id,title:l.title,image:l.image},null,8,["detailRoute","isSongCard","canBeRemove","id","title","image"])]))),256))],8,V))])}const j=h(F,[["render",A]]);export{j as C};
