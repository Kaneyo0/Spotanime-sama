import{C as w}from"./CardList-63e08f00.js";import{_ as u,s as f,o as n,c as a,a as l,t as F,r as _,F as P,b as C,d as m,e as b,w as y,v as g}from"./index-5871d887.js";const v={props:{id:{type:Number}},data(){return{edited:!0,title:"Ma playlist",image:"none",store:f}},computed:{toObject(){return{id:this.id,title:this.title,image:this.image}}},methods:{toggleEdit(){this.edited=!this.edited,this.edited||this.upsertPlaylist()},updateTitle(i){this.title=i.target.value,this.upsertPlaylist(),this.edited=!1},upsertPlaylist(){let i=this.store.list.playlist.items.findIndex(t=>t.id===this.id);console.log(i),i===-1?this.store.list.playlist.items.push(this.toObject):this.store.list.playlist.items[i]=this.toObject}}},k=["data-id"],x=["src"],S={class:"inline-card__title"},E=l("i",{class:"contact__icon material-symbols-outlined"},"delete",-1),L=["data-id"],T=["src"],I=["value"];function N(i,t,d,h,s,e){return s.edited?(n(),a("div",{key:1,"data-id":d.id,class:"inline-card"},[l("img",{src:s.image,class:"inline-card__img"},null,8,T),l("input",{type:"text",class:"inline-card__title",value:s.title,onChange:t[1]||(t[1]=(...o)=>e.updateTitle&&e.updateTitle(...o))},null,40,I),l("i",{class:"contact__icon material-symbols-outlined",onClick:t[2]||(t[2]=(...o)=>e.toggleEdit&&e.toggleEdit(...o))},"done")],8,L)):(n(),a("div",{key:0,"data-id":d.id,class:"inline-card"},[l("img",{src:s.image,class:"inline-card__img"},null,8,x),l("p",S,F(s.title),1),l("i",{class:"contact__icon material-symbols-outlined",onClick:t[0]||(t[0]=(...o)=>e.toggleEdit&&e.toggleEdit(...o))},"edit"),E],8,k))}const j=u(v,[["render",N]]),A={data(){return{playlists:[]}},methods:{addPlaylist(){this.playlists.push(Date.now())}},components:{InlineCard:j}},B={class:"form-playlist"},D=l("h1",{class:"form-playlist__title"},"Enregistrer dans",-1),O={key:0,class:"form-playlist__list"};function R(i,t,d,h,s,e){const o=_("InlineCard");return n(),a("div",B,[D,s.playlists.length>0?(n(),a("ul",O,[(n(!0),a(P,null,C(s.playlists,r=>(n(),a("li",null,[m(o,{id:r},null,8,["id"])]))),256))])):b("",!0),l("i",{class:"form-playlist__add material-symbols-outlined",onClick:t[0]||(t[0]=(...r)=>e.addPlaylist&&e.addPlaylist(...r))}," add ")])}const V=u(A,[["render",R]]),$={name:"App",data(){return{store:f,showPlaylistForm:!1}},components:{CardList:w,PlaylistForm:V},methods:{showForm(i){this.showPlaylistForm||(this.store.clickedSong=i,this.showPlaylistForm=!0,document.querySelector(".container__lists").classList.add("blur"))}},async created(){await this.store.initialize()}},q={class:"container"},z={class:"container__lists"},H={class:"container__lists__item"};function M(i,t,d,h,s,e){const o=_("PlaylistForm"),r=_("CardList");return n(),a("main",q,[y(m(o,null,null,512),[[g,s.showPlaylistForm]]),l("ul",z,[(n(!0),a(P,null,C(s.store.list,(c,p)=>(n(),a("li",H,[y(m(r,{detailRoute:c.detailRoute,name:p,isSongList:p==="songs",title:c.title,cards:c.items,onAddSongToPlaylist:e.showForm},null,8,["detailRoute","name","isSongList","title","cards","onAddSongToPlaylist"]),[[g,c.items.length>0]])]))),256))])])}const K=u($,[["render",M]]);export{K as default};
