import{_ as h,r as S,o as a,c as i,w as r,v as _,d as m,e as R,t as g,a as C,s as f,F as u,b as y}from"./index-02e6fbae.js";const k={props:{id:{type:Number},title:{type:String},image:{type:String},isSongCard:{type:Boolean,default:!1},detailRoute:{type:String},canBeRemove:{type:Boolean}}},v={class:"card__bloc"},B={key:0,class:"material-symbols-outlined card__playlist-rm"},I={key:1,class:"material-symbols-outlined card__playlist-add"},L=["src"],x={key:1,class:"material-symbols-outlined card__icon"},b={class:"card__title"};function N(d,s,t,n,l,o){const c=S("RouterLink");return a(),i("div",v,[t.canBeRemove?r((a(),i("i",B,"delete",512)),[[_,t.isSongCard]]):r((a(),i("span",I,"playlist_add",512)),[[_,t.isSongCard]]),m(c,{to:`${t.detailRoute}/${t.id}`,"data-id":t.id,"data-title":t.title,"data-image":t.image,class:"card"},{default:R(()=>{var e;return[(e=t.image)!=null&&e.includes("/")?r((a(),i("img",{key:0,src:t.image,alt:"card image",class:"card__image"},null,8,L)),[[_,t.image!=""]]):(a(),i("span",x,g(t.image),1)),C("h1",b,g(t.title),1)]}),_:1},8,["to","data-id","data-title","data-image"])])}const w=h(k,[["render",N]]),F={props:{cards:{type:Array},title:{type:String},isSongList:{type:Boolean,default:!1},name:{type:String},detailRoute:{type:String}},data(){return{store:f}},computed:{canRemovingCard(){return this.$route.name==="playlist details"}},methods:{cardClickHandler(d){const s=d.target.closest(".card__bloc");if(!s)return;const t=s.querySelector(".card"),n=this.cards.find(l=>l.id===parseInt(t.dataset.id));this.store.clickedSong=`${this.store.playlistIRI}/${n.id}`,d.target.classList.contains("card__playlist-add")?this.store.showForm():d.target.classList.contains("card__playlist-rm")&&this.removeSongFromPlaylist(n)},removeSongFromPlaylist(d){const s=this.store.list.playlist.items.findIndex(l=>l.id===parseInt(this.$route.params.id));let t=this.store.list.playlist.items[s];const n=t.songs.findIndex(l=>l.id===d.id);t.songs.splice(n,1),this.store.list.playlist.items[s]=t,this.store.patchPlaylist({...t,songs:t.songs.map(l=>`${this.store.playlistIRI}/${l.id}`)}),this.$emit("reload")}},components:{Card:w}},P={class:"card__list__container"},p={class:"card__list__title"},H=["data-listName"],D={class:"card__list__item"},V=["data-listName"],q={class:"card__list__item"};function A(d,s,t,n,l,o){const c=S("Card");return a(),i("article",P,[C("h3",p,g(t.title),1),t.isSongList?(a(),i("ul",{key:0,onClick:s[0]||(s[0]=(...e)=>o.cardClickHandler&&o.cardClickHandler(...e)),class:"card__list","data-listName":t.name},[(a(!0),i(u,null,y(t.cards,e=>(a(),i("li",D,[m(c,{detailRoute:t.detailRoute,isSongCard:t.isSongList,canBeRemove:o.canRemovingCard,id:e.id,title:e.title,image:e.image},null,8,["detailRoute","isSongCard","canBeRemove","id","title","image"])]))),256))],8,H)):(a(),i("ul",{key:1,class:"card__list","data-listName":t.name},[(a(!0),i(u,null,y(t.cards,e=>(a(),i("li",q,[m(c,{detailRoute:t.detailRoute,isSongCard:t.isSongList,canBeRemove:o.canRemovingCard,id:e.id,title:e.title,image:e.image},null,8,["detailRoute","isSongCard","canBeRemove","id","title","image"])]))),256))],8,V))])}const j=h(F,[["render",A]]);export{j as C};
